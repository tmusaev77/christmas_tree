<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Магазин елок</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@600;700&display=swap" rel="stylesheet"> <!-- Montserrat font -->
    <script src="https://api-maps.yandex.ru/2.1/?apikey=5c48eb89-4d96-4198-9ed8-3e501a989daa&lang=ru_RU" type="text/javascript"></script>

    <style>
        body {
            font-family: 'Montserrat', sans-serif;
            font-weight: 600; /* SemiBold for body text */
        }
        h1, h2, h3, h4, h5, h6, p {
            font-family: 'Montserrat', sans-serif;
            font-weight: 700; /* Bold for headings */
        }
        .logo {
            height: 100px; /* Adjust logo size */
            width: auto;
        }
        nav ul li a {
            color: black; /* Green color for nav links */
        }
        nav ul li a:hover {
            color: #106200; /* Darker green on hover */
        }
        .modal-content {
            font-family: 'Montserrat', sans-serif;
        }
        .buy-btn {
            background-color: #d9534f; /* Bootstrap danger color for buy buttons */
        }
        .buy-btn:hover {
            background-color: #c9302c; /* Slightly darker red */
        }
        .img-fluid-icon {
            width: 100px; /* Установите нужную ширину */
            height: 100px; /* Установите нужную высоту */
            object-fit: cover; /* Сохраняет пропорции, обрезая лишнее */
        }
        .card-elka {
            border-radius: 20px;
        }
        .navbar-toggler-icon {
            background-color: #106200; /* Цвет для иконки */
        }
        .offcanvas {
            position: fixed;
            top: 0;
            bottom: 0;
            right: -100%; /* Начальное состояние: за экраном справа */
            width: 250px;
            background-color: white;
            box-shadow: -5px 0 15px rgba(0, 0, 0, 0.3);
            transition: right 0.3s ease-in-out;
            z-index: 1045;
        }

        .offcanvas.show {
            right: 0; /* Показываем меню */
        }

        .btn-close {
            background-color: transparent;
            border: none;
            font-size: 1.5rem;
        }

        .offcanvas-open {
            overflow: hidden; /* Блокирует прокрутку страницы при открытом меню */
        }
        /* Увеличиваем шрифт и прижимаем ссылки */
        a {
            font-size: 1.25rem; /* Увеличиваем размер шрифта для всех ссылок */
            padding: 5px 10px;  /* Добавляем отступы */
            display: inline-block; /* Чтобы ссылки занимали блоковое пространство */
        }

        .nav-link {
            font-size: 20px; /* Увеличиваем шрифт для навигационных ссылок */
        }

    </style>
</head>
<body>
<!-- Header -->
<header class="text-white py-3">
    <div class="container d-flex justify-content-between align-items-center">
        <!-- Логотип -->
        <div class="d-flex align-items-center">
            <img src="logo.png" alt="The Christmas Logo" class="logo me-5">
        </div>

        <!-- Навигация для больших экранов -->
        <nav class="d-none d-md-block">
            <ul class="nav">
                <li class="nav-item me-4"><a class="nav-link text-black" href="#catalog">Каталог</a></li>
                <li class="nav-item me-4"><a class="nav-link text-black" href="#steps">Этапы покупки</a></li>
                <li class="nav-item me-4"><a class="nav-link text-black" href="#why-us" id="openModalDesktop">Почему мы</a></li>
                <li class="nav-item me-4"><a class="nav-link text-black" href="#contact">Контакты</a></li>
            </ul>
        </nav>

        <!-- Телефон с иконкой, скрытый на планшетах и мобильных -->
        <div class="d-none d-lg-flex align-items-center">
            <i class="bi bi-telephone-fill me-2" style="color: #106200;"></i>
            <a href="tel:+777077264412" class="text-black">+7 (707) 726-44-12</a>
        </div>

        <!-- Бургер-меню -->
        <button id="burger-btn" class="navbar-toggler d-md-none" type="button" aria-expanded="false" aria-label="Toggle navigation">
            <i class="bi bi-list" style="font-size: 1.5rem; color: #106200;"></i>
        </button>
    </div>

    <!-- Мобильное меню -->
    <div id="burger-menu" class="offcanvas offcanvas-end">
        <div class="offcanvas-header">
            <h5 class="offcanvas-title">Меню</h5>
            <button type="button" class="btn-close" id="close-burger" aria-label="Close"></button>
        </div>
        <div class="offcanvas-body">
            <ul class="navbar-nav">
                <li class="nav-item"><a class="nav-link text-black" href="#catalog">Каталог</a></li>
                <li class="nav-item"><a class="nav-link text-black" href="#steps">Этапы покупки</a></li>
                <li class="nav-item"><a class="nav-link text-black" href="#why-us" id="openModalMobile">Почему мы</a></li>
                <li class="nav-item"><a class="nav-link text-black" href="#contact">Контакты</a></li>
            </ul>
        </div>
    </div>
</header>

<section class="py-5">
    <div class="container d-flex flex-column flex-md-row align-items-center">
        <div class="col-md-6 text-center text-md-start">
            <h1>НЕВЕРОЯТНЫЕ ИСКУССТВЕННЫЕ ЕЛКИ</h1>
            <p class="mt-4" style="font-size: 22px;">Порадуйте себя и своих близких настоящим праздничным настроением с нашими елками!</p>
            <a href="#catalog" class="btn" style="margin-top: 30px; background-color: #C1010A; color: white; border-radius: 10px;">Перейти в каталог</a>
            <div class="row d-flex flex-column flex-md-row align-items-center mt-5">
                <div class="col-4 text-center">
                    <img src="price-icon.png" alt="Лучшая цена" class="img-fluid-icon mb-2">
                    <p>Лучшая цена</p>
                </div>
                <div class="col-4 text-center">
                    <img src="delivery-icon.png" alt="Быстрая доставка" class="img-fluid-icon mb-2">
                    <p>Быстрая доставка</p>
                </div>
                <div class="col-4 text-center">
                    <img src="quality-icon.png" alt="Гарантия качества" class="img-fluid-icon mb-2">
                    <p>Гарантия качества</p>
                </div>
            </div>
        </div>
        <div class="col-md-6 text-center mt-4 mt-md-0">
            <img src="elka.jpg" alt="Елка" class="img-fluid">
        </div>
    </div>
</section>

<!-- Catalog Section -->
<section id="catalog" class="py-5">
    <div class="container">
        <h2 class="text-center mb-5">Каталог</h2>
        <div class="row g-4">
            <!-- Product example -->
            <div class="col-md-4 card-elka">
                <div class="card h-100 ">
                    <!-- Slider for product images -->
                    <div id="carouselExample1" class="carousel slide" data-bs-ride="carousel">
                        <div class="carousel-inner">
                            <div class="carousel-item active">
                                <img src="test.jpg" class="d-block w-100" alt="">
                            </div>
                            <div class="carousel-item">
                                <img src="test.jpg" class="d-block w-100" alt="">
                            </div>
                            <div class="carousel-item">
                                <img src="test.jpg" class="d-block w-100" alt="">
                            </div>
                        </div>
                        <button class="carousel-control-prev" type="button" data-bs-target="#carouselExample1" data-bs-slide="prev">
                            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                            <span class="visually-hidden">Предыдущий</span>
                        </button>
                        <button class="carousel-control-next" type="button" data-bs-target="#carouselExample1" data-bs-slide="next">
                            <span class="carousel-control-next-icon" aria-hidden="true"></span>
                            <span class="visually-hidden">Следующий</span>
                        </button>
                    </div>
                    <!-- Card content -->
                    <div class="card-body text-center">
                        <h5 class="card-title">Елка 150 см</h5>
                        <p class="card-text fw-bold text-success">Цена: 20,000 тенге</p>
                        <button class="btn" style="background-color: #C1010A; color: white; padding: 10px 70px 10px 70px; border-radius: 15px" data-bs-toggle="modal" data-bs-target="#contactModal" data-tree="Елка 150 см">Купить</button>
                    </div>
                </div>
            </div>
            <div class="col-md-4 card-elka">
                <div class="card h-100">
                    <!-- Slider for product images -->
                    <div id="carouselExample2" class="carousel slide" data-bs-ride="carousel">
                        <div class="carousel-inner">
                            <div class="carousel-item active">
                                <img src="test.jpg" class="d-block w-100" alt="">
                            </div>
                            <div class="carousel-item">
                                <img src="test.jpg" class="d-block w-100" alt="">
                            </div>
                            <div class="carousel-item">
                                <img src="test.jpg" class="d-block w-100" alt="">
                            </div>
                        </div>
                        <button class="carousel-control-prev" type="button" data-bs-target="#carouselExample2" data-bs-slide="prev">
                            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                            <span class="visually-hidden">Предыдущий</span>
                        </button>
                        <button class="carousel-control-next" type="button" data-bs-target="#carouselExample2" data-bs-slide="next">
                            <span class="carousel-control-next-icon" aria-hidden="true"></span>
                            <span class="visually-hidden">Следующий</span>
                        </button>
                    </div>
                    <!-- Card content -->
                    <div class="card-body text-center">
                        <h5 class="card-title">Елка 180 см</h5>
                        <p class="card-text fw-bold text-success">Цена: 25,000 тенге</p>
                        <button class="btn" style="background-color: #C1010A; color: white;padding: 10px 70px 10px 70px; border-radius: 15px" data-bs-toggle="modal" data-bs-target="#contactModal" data-tree="Елка 180 см">Купить</button>
                    </div>
                </div>
            </div>
            <div class="col-md-4 card-elka">
                <div class="card h-100">
                    <!-- Slider for product images -->
                    <div id="carouselExample3" class="carousel slide" data-bs-ride="carousel">
                        <div class="carousel-inner">
                            <div class="carousel-item active">
                                <img src="test.jpg" class="d-block w-100" alt="">
                            </div>
                            <div class="carousel-item">
                                <img src="test.jpg" class="d-block w-100" alt="">
                            </div>
                            <div class="carousel-item">
                                <img src="test.jpg" class="d-block w-100" alt="">
                            </div>
                        </div>
                        <button class="carousel-control-prev" type="button" data-bs-target="#carouselExample3" data-bs-slide="prev">
                            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                            <span class="visually-hidden">Предыдущий</span>
                        </button>
                        <button class="carousel-control-next" type="button" data-bs-target="#carouselExample3" data-bs-slide="next">
                            <span class="carousel-control-next-icon" aria-hidden="true"></span>
                            <span class="visually-hidden">Следующий</span>
                        </button>
                    </div>
                    <!-- Card content -->
                    <div class="card-body text-center">
                        <h5 class="card-title">Елка 210 см</h5>
                        <p class="card-text fw-bold text-success">Цена: 30,000 тенге</p>
                        <button class="btn" style="background-color: #C1010A; color: white; padding: 10px 70px 10px 70px; border-radius: 15px" data-bs-toggle="modal" data-bs-target="#contactModal" data-tree="Елка 210 см">Купить</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<section class="py-5" id="steps">
    <div class="container">
        <h2 class="text-center mb-5">Этапы покупки</h2>
        <div class="row g-4">
            <!-- Step 1 -->
            <div class="col-md-3 text-center">
                <div class="card">
                    <img src="step1.png" class="card-img-top" alt="">
                    <div class="card-body">
                        <p>Заявка или звонок<br>Вы оставляете заяку на нашем сайте, или звоните нам по номеру<br>+7(707) 726-44-12</p>
                        <div class="step-number" style="color: #C1010A; font-size: 36px;">01</div>
                    </div>
                </div>
            </div>
            <!-- Step 2 -->
            <div class="col-md-3 text-center">
                <div class="card">
                    <img src="step2.png" class="card-img-top" alt="">
                    <div class="card-body">
                        <p>Уточнение деталей<br>Менеджер перезвонит Вам в течении 5 минут и уточнит детали заказа</p>
                        <div class="step-number" style="color: #C1010A; font-size: 36px;">02</div>
                    </div>
                </div>
            </div>
            <!-- Step 3 -->
            <div class="col-md-3 text-center">
                <div class="card">
                    <img src="step3.png" class="card-img-top" alt="">
                    <div class="card-body">
                        <p>Доставка<br>Доставим елку на любой адрес</p>
                        <div class="step-number" style="color: #C1010A; font-size: 36px;">03</div>
                    </div>
                </div>
            </div>
            <!-- Step 4 -->
            <div class="col-md-3 text-center">
                <div class="card">
                    <img src="elka.jpg" class="card-img-top" alt="">
                    <div class="card-body">
                        <p>Получите доставку</p>
                        <div class="step-number" style="color: #C1010A; font-size: 36px;">04</div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>


<!-- Modal -->
<div class="modal fade" id="contactModal" tabindex="-1" aria-labelledby="contactModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content" style="padding: 20px">
            <div class="modal-header">
                <h5 class="modal-title" id="contactModalLabel">Оформление заказа</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Закрыть"></button>
            </div>
            <div class="modal-body">
                <form id="contactForm">
                    <div class="mb-3">
                        <label for="customerName" class="form-label">Ваше имя:</label>
                        <input type="text" class="form-control" id="customerName" name="name" required>
                    </div>
                    <div class="mb-3">
                        <label for="customerPhone" class="form-label">Телефон:</label>
                        <input type="tel" class="form-control" id="customerPhone" name="phone" required>
                    </div>
                    <div class="mb-3 position-relative">
                        <label for="customerAddress" class="form-label">Адрес доставки:</label>
                        <input type="text" class="form-control" id="customerAddress" name="address" required autocomplete="off">
                        <ul id="suggestions" class="list-group position-absolute w-100" style="z-index: 1000;"></ul>
                    </div>
                    <input type="hidden" name="tree" id="selectedTree">
                    <button type="submit" class="btn btn-success w-100">Оформить заказ</button>
                </form>
                <div id="map" style="width: 100%; height: 300px; margin-top: 20px;"></div>
            </div>
        </div>
    </div>
</div>

<!-- Модальное окно -->
<div class="modal fade" id="whyModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Почему выбрать нас?</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <p><strong>Качество:</strong> Мы предлагаем только проверенные и высококачественные товары, которые прослужат долго.</p>
                <p><strong>Обслуживание:</strong> Наша команда всегда готова помочь и предоставить поддержку на каждом этапе покупки.</p>
                <p><strong>Удобство:</strong> Мы заботимся о вашем комфорте и предлагаем удобные способы оплаты и доставки.</p>
                <p><strong>Цена:</strong> Наши цены конкурентоспособны, и мы регулярно проводим акции и скидки.</p>
            </div>
        </div>
    </div>
</div>


<!-- Footer -->
<footer class="bg-dark text-white text-center py-5">
    <div class="container" id="contact">
        <p class="fs-4">© 2024 Your Christmas, Our Trees</p>
        <div>
            <a href="https://www.instagram.com/yourprofile" class="text-white me-3 fs-5">
                <i class="bi bi-instagram fs-3 me-2"></i> Instagram
            </a>
            <a href="https://wa.me/yourwhatsappnumber" class="text-white fs-5">
                <i class="bi bi-whatsapp fs-3 me-2"></i> WhatsApp
            </a>
        </div>
    </div>
</footer>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://unpkg.com/imask"></script>
<script>
    // Слушаем нажатие на кнопки "Купить"
    document.querySelectorAll('[data-bs-toggle="modal"]').forEach(button => {
        button.addEventListener('click', function() {
            // Получаем название елки из data-tree и передаем в скрытое поле формы
            const treeName = this.getAttribute('data-tree');
            document.getElementById('selectedTree').value = treeName;
            console.log(document.getElementById('selectedTree').value)
        });
    });

    const modal = new bootstrap.Modal(document.getElementById('whyModal'));

    // Для десктопной версии
    document.getElementById('openModalDesktop').addEventListener('click', () => {
        modal.show();
    });

    // Для мобильной версии
    document.getElementById('openModalMobile').addEventListener('click', () => {
        modal.show();
    });

    document.addEventListener("DOMContentLoaded", () => {
        const burgerBtn = document.getElementById("burger-btn");
        const closeBurger = document.getElementById("close-burger");
        const burgerMenu = document.getElementById("burger-menu");
        const navLinks = document.querySelectorAll("#burger-menu .nav-link");

        // Открыть бургер-меню
        burgerBtn.addEventListener("click", () => {
            burgerMenu.classList.add("show");
            document.body.classList.add("offcanvas-open");
        });

        // Закрыть бургер-меню
        closeBurger.addEventListener("click", () => {
            burgerMenu.classList.remove("show");
            document.body.classList.remove("offcanvas-open");
        });

        // Закрытие меню при клике на ссылку
        navLinks.forEach(link => {
            link.addEventListener("click", () => {
                burgerMenu.classList.remove("show");
                document.body.classList.remove("offcanvas-open");
            });
        });
    });

    document.addEventListener("DOMContentLoaded", () => {
        ymaps.ready(() => {
            const myMap = new ymaps.Map("map", {
                center: [43.238949, 76.889709], // Координаты Алматы
                zoom: 12, // Уровень масштаба
                controls: [
                    "zoomControl",          // Управление масштабом
                    // "searchControl",        // Поле для поиска
                    // "typeSelector",         // Переключатель типов карт
                    // "geolocationControl",   // Кнопка геолокации
                    // "routePanelControl",    // Панель маршрута
                    // "trafficControl",       // Панель пробок
                    // "rulerControl",         // Панель измерений
                    "fullscreenControl"     // Кнопка полноэкранного режима
                ]
            });

            let placemark;

            // Функция для добавления метки на карту
            const geocodeAddress = (address) => {
                ymaps.geocode(address, { results: 1 }).then((res) => {
                    const firstGeoObject = res.geoObjects.get(0);
                    if (firstGeoObject) {
                        const coordinates = firstGeoObject.geometry.getCoordinates();

                        // Удаляем предыдущую метку, если она есть
                        if (placemark) {
                            myMap.geoObjects.remove(placemark);
                        }

                        // Добавляем новую метку
                        placemark = new ymaps.Placemark(coordinates, {
                            hintContent: address,
                            balloonContent: firstGeoObject.getAddressLine(),
                        });

                        myMap.geoObjects.add(placemark);

                        // Центрируем карту на новые координаты
                        myMap.setCenter(coordinates, 14);
                    }
                });
            };

            // API подсказок Яндекса (с использованием API-ключа)
            const fetchSuggestions = async (query) => {
                const apiKey = '5c48eb89-4d96-4198-9ed8-3e501a989daa'; // Укажите ваш API-ключ
                const url = `https://geocode-maps.yandex.ru/1.x/?apikey=${apiKey}&geocode=${encodeURIComponent(query)}&format=json&lang=ru_RU`;
                try {
                    const response = await fetch(url);
                    const data = await response.json();

                    // Обрабатываем результаты
                    const suggestions = data.response.GeoObjectCollection.featureMember.map(
                        (item) => item.GeoObject.name
                    );
                    return suggestions;
                } catch (error) {
                    console.error('Ошибка при запросе подсказок:', error);
                    return [];
                }
            };

            // Получение подсказок для ввода адреса
            const addressInput = document.getElementById("customerAddress");
            const suggestionsList = document.getElementById("suggestions");

            addressInput.addEventListener("input", async () => {
                const query = addressInput.value;
                if (query.length > 3) { // Показать подсказки только если введено более 3 символов
                    const suggestions = await fetchSuggestions(`Алматы, ${query}`);
                    suggestionsList.innerHTML = "";

                    suggestions.forEach((suggestion) => {
                        const listItem = document.createElement("li");
                        listItem.className = "list-group-item list-group-item-action";
                        listItem.textContent = suggestion;
                        listItem.addEventListener("click", () => {
                            addressInput.value = suggestion;
                            suggestionsList.innerHTML = ""; // Очищаем подсказки
                            geocodeAddress(suggestion);
                        });
                        suggestionsList.appendChild(listItem);
                    });
                } else {
                    suggestionsList.innerHTML = ""; // Очищаем подсказки, если ввода мало
                }
            });

            // Убираем подсказки при клике вне поля
            document.addEventListener("click", (e) => {
                if (!suggestionsList.contains(e.target) && e.target !== addressInput) {
                    suggestionsList.innerHTML = "";
                }
            });
        });
    });

    document.addEventListener("DOMContentLoaded", () => {
        const phoneInput = document.getElementById("customerPhone");
        IMask(phoneInput, {
            mask: '+{7} (000) 000-00-00',
        });
    });

    document.getElementById("contactForm").addEventListener("submit", async (e) => {
        e.preventDefault();

        const name = document.getElementById("customerName").value;
        let phone = document.getElementById("customerPhone").value;
        const address = document.getElementById("customerAddress").value;
        const tree = document.getElementById("selectedTree").value;

        // Убираем все пробелы, дефисы и скобки из номера телефона
        phone = phone.replace(/\D+/g, "");  // Оставляем только цифры

        console.log("Отформатированный номер телефона:", phone);

        // Если номер начинается не с +7, добавляем +7
        if (!phone.startsWith("7")) {
            phone = "7" + phone;  // Добавляем 7, если его нет
        }

        phone = "+7" + phone.slice(1);  // Преобразуем в формат +7...

        console.log("Телефон после добавления +7:", phone);

        // Проверка формата номера телефона
        const phonePattern = /^\+7\d{10}$/;
        if (!phonePattern.test(phone)) {
            alert("Номер телефона должен начинаться с +7 и содержать 11 цифр.");
            return;
        }

        // Логируем данные перед отправкой
        console.log("Отправляемые данные:", { name, phone, address, tree });

        try {
            const response = await fetch("https://blossom-boulevard.kz/send-data.php", {
                method: "POST",
                headers: {
                    "Content-Type": "application/json",
                },
                body: JSON.stringify({ name, phone, address, tree }),
            });

            const result = await response.json();
            if (result.success) {
                alert("Заказ успешно оформлен!");
            } else {
                alert("Ошибка при оформлении заказа.");
            }
        } catch (error) {
            console.error("Ошибка:", error);
            alert("Ошибка подключения к серверу.");
        }
    });

</script>
</body>
</html>
